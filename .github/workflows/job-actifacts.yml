name: Deploy App
on:
  push:
    branches:
      - main
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
     - name: Get Code
       uses: actions/checkout@v4
     - name: Install dependencies
       run: npm ci
     - name: Lint Code
       run: npm run lint
     - name: Test Code
       run: npm test
  build:
    needs: test
    runs-on: ubuntu-latest
    steps:
     - name: Get Code
       uses: actions/checkout@v4
     - name: Install dependencies
       run: npm ci
     - name: Build website
       run: npm run build
     - name: Upload artifacts
       uses: actions/upload-artifact@v2
       with:
         name: dist-files
         path: dist
  deploy:
    needs: build
    runs-on: ubuntu-latest
    steps:
     - name: Get build artifacts
       uses: actions/download-artifact@v3
       with:
        name: dist-files
     - name: Output contents
       run: ls
     - name: Deploy website
       run: echo "Deploying ..."
